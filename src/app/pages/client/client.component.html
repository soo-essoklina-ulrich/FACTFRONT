<p-toast/>
<div class="card">
    @if (loading) {
        <app-loader/>
    } @else {
        <p-table

            [value]="clients"
            [rows]="10"
            [rowsPerPageOptions]="[10, 25, 50]"
            [paginator]="true"
            stripedRows
            [tableStyle]="{'min-width': '50rem'}"
        >
            <ng-template #caption>
                <div class="flex justify-between items-center mb-3">

                    <input
                        pInputText
                        type="text"
                        (input)="filterGlobal($event)"
                        placeholder="Recherche un Client"/>

                    <div class="flex justify-around items-center ">
                        <p-button
                            class="mx-1"
                            pTooltip="Ajouter un Client"
                            tooltipPosition="top"
                            icon="fa-solid fa-plus"
                            (click)="showAddClientModal()"
                        />
                        <p-button
                            class="mx-1"
                            pTooltip="Recharge les Clients"
                            tooltipPosition="top"
                            icon="fa-solid fa-refresh"
                            (click)="getClients()"
                        />

                    </div>
                </div>
            </ng-template>
            <ng-template #header>
                <tr>
                    <th>#</th>
                    <th>Nom</th>
                    <th>Sigle</th>
                    <th>Lieu</th>
                    <th>Telephone</th>
                    <th>Potentiel</th>
                    <th>Action</th>
                </tr>

            </ng-template>
            <ng-template #body let-client let-index="rowIndex">

                    <tr>
                        <td>{{index+1}}</td>
                        <td>{{client.nom}}</td>
                        <td>{{client.sigle}}</td>
                        <td>{{client.lieu}}</td>
                        <td>{{client.telephone}}</td>
                        <td>
                            <p-tag
                            [severity]="client.potentiel? 'success':'warn'"
                            [value]="client.potentiel? 'Oui':'Non'"
                            />
                        </td>
                        <td>
                            <div class=" flex items-center gap-3 justify-center">
                                <i
                                    class="pi pi-pencil pi-fw cursor-pointer" style="color: blue"
                                    (click)="editClient(client.id)"
                                ></i>
                                <i
                                    pTooltip="supprimer {{client.nom}}"
                                    tooltipPosition="top"
                                    class="fa-solid fa-trash cursor-pointer" style="color: red"
                                    (click)="deleteClient(client.id)"
                                ></i>
                            </div>
                        </td>
                    </tr>


            </ng-template>
        </p-table>
    }
</div>
